<div class="page">
    <app-topbar class="topbar"></app-topbar>

    <div class="contents">
        <app-side-bar class="sidebar"></app-side-bar>
    
        <div class="container">
            <div class="shadow">
                <div class="title">
                    <h1>Settings</h1>
    
                    <div class="header-buttons">
                        <label 
                            for="file-upload" 
                            class="button upload-exel"
                        >
                            Upload xlsx
                        </label>
                        <input 
                            id="file-upload" 
                            class="file-upload" 
                            type="file" 
                            accept=".xlsx"
                            (change)="importXlsx($event)"
                        >

                        <button 
                            class="button new-product settings" 
                            (click)="addNewProduct()"
                        >
                            Add new product
                        </button>
                    </div>
                </div>
            
                <div class="content">
                    <div class="table">

                        <table class="products">
                            <tr class="table-header">
                                <th class="name">Name</th>
                                <th class="category">Category</th>
                                <th class="price">Price ($)</th>
                                <th class="size">Size (kg)</th>
                                <th class="quantity">Quantity</th>
                                <th class="edit"></th>
                            </tr>


                            <tr class="newProduct" *ngIf="visible">
                                <td>
                                     <input
                                        #name="ngModel"
                                        type="text" 
                                        class="input" 
                                        name="name"
                                        [(ngModel)]="credentials.name"
                                     >
                                     <p
                                        *ngIf="error.name" 
                                        class="errors"
                                    >
                                        Filed is required.
                                    </p>
                                </td>
                                <td>
                                    <input
                                        #category="ngModel"
                                        type="text" 
                                        class="input" 
                                        name="category"
                                        [(ngModel)]="credentials.category"
                                    >
                                    <p
                                        *ngIf="error.category" 
                                        class="errors"
                                    >
                                        Filed is required.
                                    </p>
                                </td>
                                <td>
                                    <input
                                        #price="ngModel"
                                        type="number" 
                                        class="input" 
                                        name="price"
                                        [(ngModel)]="credentials.price"
                                    >
                                    <p
                                        *ngIf="error.price" 
                                        class="errors"
                                    >
                                        Filed is required.
                                    </p>
                                </td>
                                <td>
                                    <input
                                        #size="ngModel"
                                        type="number" 
                                        class="input" 
                                        name="size"
                                        [(ngModel)]="credentials.size"
                                    >
                                </td>
                                <td>
                                    <input
                                        #quantity="ngModel"
                                        type="number" 
                                        class="input" 
                                        name="quantity"
                                        [(ngModel)]="credentials.quantity"
                                    >
                                </td>
                                <td>
                                    <button 
                                        class="check-button"
                                        (click)="confirm()"
                                    >
                                        <i class="fa-solid fa-check"></i>
                                    </button>
                                    <button 
                                        class="x-button" 
                                        (click)="cancel()"
                                    >
                                        <i class="fa-solid fa-xmark"></i>
                                    </button>
                                </td>
                            </tr>

                            <tr class="product" *ngFor="let product of products | filter: searchText">
                                <td>{{ product.name }}</td>
                                <td>{{ product.category }}</td>
                                <td>${{ product.price }}</td>
                                <td>{{ product.size }}kg</td>
                                <td>{{ product.quantity }}</td>
                                <td>
                                    <button 
                                        class="x-button"
                                        (click)="delete(product.productID)"
                                    >
                                        <i class="fa-solid fa-xmark"></i>
                                    </button>
                                </td>
                            </tr>
                        </table>
                        <div class="no-products" *ngIf="products.length === 0">
                            <p>No products</p>
                        </div>
                    </div>
    
                    <div class="buttons">
                        <button 
                            class="button settings"
                            routerLink="/settings"
                            routerLinkActive="active"
                        >
                            Back
                        </button>
                        <button 
                            class="button save"
                            (click)="save()"
                        >
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>